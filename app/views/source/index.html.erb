<% provide(:title, 'Source') %>

<%= link_to "Browse all files", project_branch_root_tree_path(@project.id, @current_branch_name), :class => 'button r' %>

<h1>Source</h1>

<div>

  <div class="both">
    <% @branches.each do |branch| %>
        <%= link_to branch.name, project_branch_path(@project.id, branch.name), class: 'button r' %>
    <% end %>
  </div>

  <div>
    <h2>
      Current branch: <%= @current_branch_name %>
    </h2>
  </div>

  <% if @current_branch_commits.any? %>

      <div id="commits">
        <% for commit in @current_branch_commits %>
            <div class="commit">
              <div class="revision">
                Revision: <%= link_to commit.id[0..10], project_branch_commit_path(@project.id, @current_branch_name, commit.id) %>
              </div>
              <div class="info">
                <%= commit.committer.name %>
                <span>at <%= commit.committed_date.strftime '%A, %d %B %Y (%H:%M)' %></span>
              </div>
              <div class="msg">
                <%= simple_format commit.message %>
              </div>
            </div>
        <% end %>
      </div>

  <% else %>
      <p>There are no commits yet.</p>
  <% end %>
</div>
